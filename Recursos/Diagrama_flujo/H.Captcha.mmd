sequenceDiagram
    participant User
    participant Application
    participant FileSystem

    note over User, Application: Desde FormNacimiento
    rect rgb(230, 230, 255)
    note over Application: ValidaciÃ³n de Captcha Interactivo

    Application->>Application: 1.1: Constructor(nombre, contraseÃ±a, esNuevo)
    Application->>Application: 1.2: PosicionarAleatoriamente()
    Application->>Application: 1.3: InicializarPreguntas()
    Application->>Application: 1.4: FormCaptcha_Load()
    Application->>Application: 1.5: MostrarPregunta() â†’ Primera pregunta visible para el usuario
    end

    %% ðŸŸ¢ InteracciÃ³n del Usuario
    loop Mientras haya preguntas pendientes
        User->>Application: 2.1: Escribir respuesta y presionar btnEnviar
        Application->>Application: 2.2: Validar respuesta actual

        alt Respuesta vacÃ­a
            Application->>User: Mostrar â€œÂ¿Demasiado difÃ­cil la pregunta?â€
        else Respuesta correcta
            Application->>User: Mostrar â€œÂ¡Correcto!â€
            Application->>Application: Avanzar()
            alt Quedan preguntas
                Application->>Application: Mostrar siguiente pregunta
            else Ãšltima pregunta
                alt Es nuevo usuario
                    Application->>FileSystem: GuardarUsuario()
                    Application->>FileSystem: Crear carpeta â€œRecursosâ€ si no existe
                    Application->>FileSystem: Escribir/Actualizar archivo â€œusuarios.txtâ€
                    FileSystem-->>Application: ConfirmaciÃ³n de guardado
                    Application->>User: Mensaje â€œRegistro completadoâ€
                else Usuario ya registrado
                    Application->>User: Mensaje â€œUsuario existenteâ€
                end
                Application->>Application: Crear FormPanelUniverso()
                Application->>Application: Ocultar FormCaptcha
                Application->>Application: Mostrar FormPanelUniverso
            end
        else Respuesta incorrecta
            Application->>User: Mostrar mensaje de error especÃ­fico
        end
    end

    %% ðŸ“ Guardado y Errores
    alt Error al guardar usuario
        Application->>User: Mostrar mensaje â€œError al guardar el usuarioâ€
    end

    note over Application: ðŸ§© Ventana posicionada aleatoriamente (PosicionarAleatoriamente)
    Alt
    Application->>Application: StartPosition
    Application->>Application: Randomizar coordenadas
    end

    note over User, Application: CONTINÃšA en FormPanelUniverso
